
Процедура ОбработкаЗаполнения(ДанныеЗаполнения, СтандартнаяОбработка)
	
КонецПроцедуры

Процедура ПередЗаписью(Отказ, Замещение)
	
	Перем _Отказ, _Ошибка;
	
	Если ОбменДанными.Загрузка Тогда
		Возврат;
	КонецЕсли;
	
	Если ЭтотОбъект.Отбор.ХозяйствующийСубъект.Использование Тогда
		
		Для каждого _Запись Из ЭтотОбъект Цикл
			_Запись.ВСервисе = Истина;
		КонецЦикла;
		
		_BusinessEntityGuid = ВетисDictionaryСлой1с.BusinessEntity(ЭтотОбъект.Отбор.ХозяйствующийСубъект.Значение);
		
		_EnterpriseGuid = ВетисDictionaryСлой1с.Enterprise(ЭтотОбъект.Отбор.Предприятие.Значение);
		
		_Enterprise = Неопределено;
		
		_параметры = Неопределено;
		
		_Версия20 = Ветис.Версия_2_0();
		
		Пока ?(_Версия20, ВетисEnterpriseService_2_0, ВетисEnterpriseService).GetActivityLocationListСледующий(_BusinessEntityGuid, _Enterprise, _параметры, _Отказ, _Ошибка) Цикл
			Если _Отказ = Истина Тогда
				Прервать;
			ИначеЕсли _EnterpriseGuid = _Enterprise.guid Тогда
				Для каждого _Запись Из ЭтотОбъект Цикл
					_Запись.ВСервисе = Истина;
				КонецЦикла;
				Прервать;
			КонецЕсли;
		КонецЦикла;
		
	КонецЕсли;
	
КонецПроцедуры
